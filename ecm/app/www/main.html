<div>
  <div id="ecmMain">
  <nav data-ecm-replace="navbar.html"></nav>
  <div id="ecmRouter"></div>
  <script async>
   ECM.router.pages = [
	["/diary/", "diary-table.html"],
	["/bordereau/", "bordereau.html"],
	["/contract/", "contract.html"],
	["/manage/", "manage.html"],
	["/movement/", "movement.html"],
	["/time-recorded/", "time-recorded.html"],
	["/query/", "query.html"],
	["/person/", "person.html"],
	["/staging/", "diary-table.html"]
    ];

    if (window.location.pathname === "/diary/") {
	document.title = "Diary"

    }
    // console.log('HErenow', ECM)
  </script>

   <div data-ecm-replace="admin-pi.html"></div>
  </div>

  <script>
    // console.log('Here?', document.getElementById('ecmMain'))
  </script>
 <script>
    //console.log("This is the main HTML", ECM.router.pages)
    
   document.body.addEventListener(
       'ecm-init-navbar',
       (e) => {
	   ECM.entityCache = new EntityCache();
	   console.log('finished init now, loading routes')
           const place = document.querySelector('#ecmRouter'),
		 fc = place.firstChild;
	   ECM.router.findPage(document.location, place)
	       .then(page => {
		   console.log("Found Page:", page)
		   if (page) {
		      // place.prepend(page)
  		       console.log('loaded page from main', page, document.body.contains(page))
		   } else {
		       ECM.router.loadPage("diary-table.html", place)
			   .then(page => {
      			       fc && fc.remove()
			   });
		   }
	       });
	   
       })
		      
				  
  </script>

</div>
