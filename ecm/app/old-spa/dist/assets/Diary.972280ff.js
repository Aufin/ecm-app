var A=Object.defineProperty;var g=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var U=(n,t,a)=>t in n?A(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,V=(n,t)=>{for(var a in t||(t={}))M.call(t,a)&&U(n,a,t[a]);if(g)for(var a of g(t))S.call(t,a)&&U(n,a,t[a]);return n};import{r,q as B,o as i,a as x,c as w,A as k,j as N,H as I,y as l,Z as y,ae as j,b as D,C as R,h as p}from"./vendor.7b6f695f.js";import{R as O}from"./Report.99ffdd4b.js";import{_ as C}from"./DateTimePicker.7ab0efe6.js";import{a as $}from"./axios.3fa379ca.js";import{b as z}from"./index.ad6f86f2.js";import{u as E}from"./vuex.df26a1fd.js";import"./exceljs.4eeb6046.js";import"./numfmt.50579c65.js";import"./SpreadSheet.5622495f.js";import"./hyperformula.40eff455.js";import"./uikit.bf3afdb6.js";import"./vue3-date-time-picker.9548981a.js";import"./@babel/core.ed44cf94.js";import"./@vueform/multiselect.69d395cc.js";import"./vue3-datepicker.8db1d195.js";import"./xlsx-js-style.0235676d.js";import"./clusterize.js.78919985.js";import"./file-saver.55724082.js";import"./vue-cookie-next.8cb9bd86.js";import"./luxon.1f9cfc03.js";import"./react-cookie.6c5c119f.js";const Z={props:{modelValue:Object},emits:["update:modelValue"],setup(n,{emit:t}){const a=e=>{t("update:modelValue",e)},b=({input:e,items:u})=>{const d=(m,c)=>m.name.startsWith(c)?1:0;u.sort((m,c)=>0-d(m,e)+d(c,e)),console.log(u)},v=r([]),f=r(),_=r();return B(()=>{_.value.$el.getElementsByTagName("input")[0].setAttribute("class","uk-input")}),$.get("/rpc/db/diary-users").then(e=>v.value=e.data.diary_users).catch(e=>f.value=e),(e,u)=>(i(),x(z,{ref_key:"typeahead",ref:_,placeholder:"User Name",items:v.value,"min-input-length":0,"item-projection":d=>d.name,onSelectItem:a,onOnInput:b},null,8,["items","item-projection"]))}},q={class:"ecm-center-inputs"},F={class:"uk-width-expand uk-margin"},H=p("\xA0All Users"),P=p(" \xA0\xA0 "),W=p("\xA0Select User"),G={key:0,class:"uk-margin"},J={class:"uk-width-expand uk-margin"},K=p("\xA0Not Done/Overdue"),L=p(" \xA0\xA0 "),Q=p("\xA0All Entries"),X={key:1},Y=p(" Deadline: "),ee={key:2,class:"uk-width-expand uk-text-center uk-padding"},te=["onClick"],ge={setup(n){E();const t=r(new Date),a=r(),b=r(new Date),v=Intl.DateTimeFormat().resolvedOptions().timeZone,f={hours:0,minutes:0},_=r([f,f]),e=r("overdue"),u=r("all"),d=r(),m=w(()=>e.value&&t.value),c=w(()=>{const h={timezone:v,user_id:u.value==="select"?d.value.user_id:!1,overdue:e.value==="overdue"};return e.value==="overdue"?V({deadline:t.value,start_date:"1900-01-01"},h):V({deadline:a.value[1],start_date:a.value[0]},h)});return(h,o)=>(i(),k("div",q,[N(O,{title:"Diary Report"},{default:I(({toggle:ae,runReport:T})=>[l("div",F,[l("label",null,[y(l("input",{class:"uk-radio",type:"radio",value:"all","onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),checked:""},null,512),[[j,u.value]]),H]),P,l("label",null,[y(l("input",{class:"uk-radio",type:"radio",value:"select","onUpdate:modelValue":o[1]||(o[1]=s=>u.value=s)},null,512),[[j,u.value]]),W])]),u.value==="select"?(i(),k("div",G,[N(Z,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=s=>d.value=s)},null,8,["modelValue"])])):D("",!0),l("div",J,[l("label",null,[y(l("input",{class:"uk-radio",type:"radio",value:"overdue","onUpdate:modelValue":o[3]||(o[3]=s=>e.value=s),checked:""},null,512),[[j,e.value]]),K]),L,l("label",null,[y(l("input",{class:"uk-radio",type:"radio",value:"all","onUpdate:modelValue":o[4]||(o[4]=s=>e.value=s)},null,512),[[j,e.value]]),Q])]),e.value?(i(),k("div",X,[Y,e.value==="overdue"?(i(),x(C,{key:0,class:"uk-inline",inputClassName:"uk-input",format:"yyyy-MM-dd",modelValue:t.value,"onUpdate:modelValue":o[5]||(o[5]=s=>t.value=s),placeholder:"Due Date (entry due before)",startDate:b.value,autoApply:""},null,8,["modelValue","startDate"])):(i(),x(C,{key:1,inputClassName:"uk-input",format:"yyyy-MM-dd",modelValue:a.value,"onUpdate:modelValue":o[6]||(o[6]=s=>a.value=s),placeholder:"Date Range",range:"",twoCalendars:"",autoApply:"",startTime:_.value},null,8,["modelValue","startTime"])),R(m)?(i(),k("div",ee,[l("button",{onClick:s=>T("/rpc/report/diary",R(c),"Diary"),class:"uk-button uk-button-primary",type:"button"}," Run Report ",8,te)])):D("",!0)])):D("",!0)]),_:1})]))}};export{ge as default};
