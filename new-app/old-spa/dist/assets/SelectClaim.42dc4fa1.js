import{u as $}from"./vuex.df26a1fd.js";import{a as I}from"./axios.3fa379ca.js";import{b as j}from"./index.ad6f86f2.js";import{l as p}from"./localforage.432ba2b7.js";import{o as a,A as s,y as n,b as r,i as C,j as h,r as u,c as f,q as N,C as k,a as V,H as S,h as B}from"./vendor.7b6f695f.js";p.config({name:"ECM GUI",storageName:"ecmgui"});const O=p,A={style:{display:"inline-block"}},w=["innerHTML"],E=["innerHTML"],D=["innerHTML"],q=["innerHTML"],F=["innerHTML"],G=["innerHTML"],U={props:{contract:Object},setup(t){return(l,m)=>(a(),s("div",A,[n("h4",{style:{display:"inline-block"},innerHTML:t.contract.contract_number},null,8,w),n("span",{innerHTML:" "+t.contract.effective_date+" to "+t.contract.expiry_date},null,8,E),t.contract.syndicate?(a(),s("small",{key:0,"uk-tooltip":"Syndicate",innerHTML:" "+t.contract.syndicate.name},null,8,D)):r("",!0),t.contract.london_broker?(a(),s("small",{key:1,"uk-tooltip":"London Broker",innerHTML:", "+t.contract.london_broker.name},null,8,q)):r("",!0),t.contract.insurance_company?(a(),s("small",{key:2,"uk-tooltip":"Insurance Company",innerHTML:", "+t.contract.insurance_company.name},null,8,F)):r("",!0),t.contract.agency?(a(),s("small",{key:3,"uk-tooltip":"Agency",innerHTML:", "+t.contract.agency.name},null,8,G)):r("",!0)]))}},z={class:"uk-inline-block"},J={class:"uk-text-lead"},K=n("span",{class:"uk-text-meta"},"Insured ",-1),P=["innerHTML"],Q=n("span",{class:"uk-text-meta"}," DOL ",-1),R=["innerHTML"],W=n("span",{class:"uk-text-meta"}," Contract ",-1),X={props:{claim:Object},setup(t){return(l,m)=>(a(),s("div",z,[n("span",J,"#"+C(t.claim.claim_id)+"\xA0",1),n("span",null,[K,n("span",{innerHTML:t.claim.risk.policy.insured.name+" "+(t.claim.risk.policy.insured.province.short_name||" ")},null,8,P)]),n("span",null,[Q,n("span",{innerHTML:t.claim.date_of_loss},null,8,R)]),n("div",null,[W,h(U,{contract:t.claim.risk.contract},null,8,["contract"])])]))}},Y={key:0,class:"uk-text-center uk-inline-block"},Z=B(" \xA0\xA0"),ee=["innerHTML"],y=u([]),te=u(),le={props:{modelValue:Object},emits:["update:modelValue"],setup(t,{emit:l}){const m=t;window.localforage=O;const d=$();f(()=>d&&d.state&&d.state.user),y.value.length==0;const i=f({get:()=>m.modelValue,set:e=>{l("update:modelValue",e)}}),T=()=>{i.value=void 0};u(te);const g=e=>e.$el.getElementsByTagName("input")[0].setAttribute("class","uk-input"),o=u();N(()=>{const e=o.value;e&&g(e)});const b=({input:e,items:c})=>{console.log("Test Input",e,c,o)},L=e=>(console.log("aroundItems?",e),[{claim_id:"Search for "+o.value.input,search_for_claim:o.value.input},...e]),M=e=>{if(console.log("findClaim",e,!isNaN(e)),!isNaN(e))return console.log("posting!"),I.post("/rpc/db/claim",{claim_id:parseInt(e)})},H=e=>{e.search_for_claim?(console.log("Searching ",e.search_for_claim),o.value.input=e.search_for_claim,M(e.search_for_claim).then(c=>{o.value.selectItem(c.data),console.log("Found one",c)}).catch(c=>console.error(c))):(i.value=e,l("update:modelValue",e))};return(e,c)=>k(i)?(a(),s("div",Y,[h(X,{claim:k(i)},null,8,["claim"]),Z,n("button",{onClick:T,style:{position:"relative: top: -1em"},class:"uk-close-large",type:"button","uk-close":""})])):(a(),V(j,{key:1,ref_key:"typeahead",ref:o,placeholder:"Claim # or search",items:y.value,"min-input-length":2,"item-projection":_=>_.claim_id,"around-items":L,onOnInput:b,onSelectItem:H},{"list-item-text":S(({boldMatchText:_,itemProjection:v,item:x})=>[n("h4",{style:{display:"inline-block"},innerHTML:_(v(x))},null,8,ee)]),_:1},8,["items","item-projection"]))}};export{le as _};
