var N={exports:{}};(function(M){(function(_,p){M.exports=p()})("Clusterize",function(){var _=function(){for(var e=3,t=document.createElement("b"),o=t.all||[];t.innerHTML="<!--[if gt IE "+ ++e+"]><i><![endif]-->",o[0];);return e>4?e:document.documentMode}(),p=navigator.platform.toLowerCase().indexOf("mac")+1,u=function(e){if(!(this instanceof u))return new u(e);var t=this,o={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};t.options={};for(var n=["rows_in_block","blocks_in_cluster","show_no_data_row","no_data_class","no_data_text","keep_parity","tag","callbacks"],s=0,l;l=n[s];s++)t.options[l]=typeof e[l]!="undefined"&&e[l]!=null?e[l]:o[l];for(var h=["scroll","content"],s=0,i;i=h[s];s++)if(t[i+"_elem"]=e[i+"Id"]?document.getElementById(e[i+"Id"]):e[i+"Elem"],!t[i+"_elem"])throw new Error("Error! Could not find "+i+" element");t.content_elem.hasAttribute("tabindex")||t.content_elem.setAttribute("tabindex",0);var r=m(e.rows)?e.rows:t.fetchMarkup(),c={},L=t.scroll_elem.scrollTop;t.insertToDOM(r,c),t.scroll_elem.scrollTop=L;var d=!1,k=0,v=!1,E=function(){p&&(v||(t.content_elem.style.pointerEvents="none"),v=!0,clearTimeout(k),k=setTimeout(function(){t.content_elem.style.pointerEvents="auto",v=!1},50)),d!=(d=t.getClusterNum(r))&&t.insertToDOM(r,c),t.options.callbacks.scrollingProgress&&t.options.callbacks.scrollingProgress(t.getScrollProgress())},y=0,T=function(){clearTimeout(y),y=setTimeout(t.refresh,100)};w("scroll",t.scroll_elem,E),w("resize",window,T),t.destroy=function(a){C("scroll",t.scroll_elem,E),C("resize",window,T),t.html((a?t.generateEmptyRow():r).join(""))},t.refresh=function(a){(t.getRowsHeight(r)||a)&&t.update(r)},t.update=function(a){r=m(a)?a:[];var f=t.scroll_elem.scrollTop;r.length*t.options.item_height<f&&(t.scroll_elem.scrollTop=0,d=0),t.insertToDOM(r,c),t.scroll_elem.scrollTop=f},t.clear=function(){t.update([])},t.getRowsAmount=function(){return r.length},t.getScrollProgress=function(){return this.options.scroll_top/(r.length*this.options.item_height)*100||0};var x=function(a,f){var b=m(f)?f:[];!b.length||(r=a=="append"?r.concat(b):b.concat(r),t.insertToDOM(r,c))};t.append=function(a){x("append",a)},t.prepend=function(a){x("prepend",a)}};u.prototype={constructor:u,fetchMarkup:function(){for(var e=[],t=this.getChildNodes(this.content_elem);t.length;)e.push(t.shift().outerHTML);return e},exploreEnvironment:function(e,t){var o=this.options;o.content_tag=this.content_elem.tagName.toLowerCase(),!!e.length&&(_&&_<=9&&!o.tag&&(o.tag=e[0].match(/<([^>\s/]*)/)[1].toLowerCase()),this.content_elem.children.length<=1&&(t.data=this.html(e[0]+e[0]+e[0])),o.tag||(o.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(e))},getRowsHeight:function(e){var t=this.options,o=t.item_height;if(t.cluster_height=0,!!e.length){var n=this.content_elem.children;if(!!n.length){var s=n[Math.floor(n.length/2)];if(t.item_height=s.offsetHeight,t.tag=="tr"&&g("borderCollapse",this.content_elem)!="collapse"&&(t.item_height+=parseInt(g("borderSpacing",this.content_elem),10)||0),t.tag!="tr"){var l=parseInt(g("marginTop",s),10)||0,h=parseInt(g("marginBottom",s),10)||0;t.item_height+=Math.max(l,h)}return t.block_height=t.item_height*t.rows_in_block,t.rows_in_cluster=t.blocks_in_cluster*t.rows_in_block,t.cluster_height=t.blocks_in_cluster*t.block_height,o!=t.item_height}}},getClusterNum:function(e){var t=this.options;t.scroll_top=this.scroll_elem.scrollTop;var o=t.cluster_height-t.block_height,n=Math.floor(t.scroll_top/o),s=Math.floor(e.length*t.item_height/o);return Math.min(n,s)},generateEmptyRow:function(){var e=this.options;if(!e.tag||!e.show_no_data_row)return[];var t=document.createElement(e.tag),o=document.createTextNode(e.no_data_text),n;return t.className=e.no_data_class,e.tag=="tr"&&(n=document.createElement("td"),n.colSpan=100,n.appendChild(o)),t.appendChild(n||o),[t.outerHTML]},generate:function(e){var t=this.options,o=e.length;if(o<t.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:o?e:this.generateEmptyRow()};var n=Math.max((t.rows_in_cluster-t.rows_in_block)*this.getClusterNum(e),0),s=n+t.rows_in_cluster,l=Math.max(n*t.item_height,0),h=Math.max((o-s)*t.item_height,0),i=[],r=n;l<1&&r++;for(var c=n;c<s;c++)e[c]&&i.push(e[c]);return{top_offset:l,bottom_offset:h,rows_above:r,rows:i}},renderExtraTag:function(e,t){var o=document.createElement(this.options.tag),n="clusterize-";return o.className=[n+"extra-row",n+e].join(" "),t&&(o.style.height=t+"px"),o.outerHTML},insertToDOM:function(e,t){this.options.cluster_height||this.exploreEnvironment(e,t);var o=this.generate(e),n=o.rows.join(""),s=this.checkChanges("data",n,t),l=this.checkChanges("top",o.top_offset,t),h=this.checkChanges("bottom",o.bottom_offset,t),i=this.options.callbacks,r=[];s||l?(o.top_offset&&(this.options.keep_parity&&r.push(this.renderExtraTag("keep-parity")),r.push(this.renderExtraTag("top-space",o.top_offset))),r.push(n),o.bottom_offset&&r.push(this.renderExtraTag("bottom-space",o.bottom_offset)),i.clusterWillChange&&i.clusterWillChange(),this.html(r.join("")),this.options.content_tag=="ol"&&this.content_elem.setAttribute("start",o.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(o.rows_above-1),i.clusterChanged&&i.clusterChanged()):h&&(this.content_elem.lastChild.style.height=o.bottom_offset+"px")},html:function(e){var t=this.content_elem;if(_&&_<=9&&this.options.tag=="tr"){var o=document.createElement("div"),n;for(o.innerHTML="<table><tbody>"+e+"</tbody></table>";n=t.lastChild;)t.removeChild(n);for(var s=this.getChildNodes(o.firstChild.firstChild);s.length;)t.appendChild(s.shift())}else t.innerHTML=e},getChildNodes:function(e){for(var t=e.children,o=[],n=0,s=t.length;n<s;n++)o.push(t[n]);return o},checkChanges:function(e,t,o){var n=t!=o[e];return o[e]=t,n}};function w(e,t,o){return t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent("on"+e,o)}function C(e,t,o){return t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent("on"+e,o)}function m(e){return Object.prototype.toString.call(e)==="[object Array]"}function g(e,t){return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}return u})})(N);
