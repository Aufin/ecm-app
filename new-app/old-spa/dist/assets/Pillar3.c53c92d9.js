import{a as P}from"./axios.3fa379ca.js";import{a as B,S as C,s as E}from"./index.ad6f86f2.js";import{_ as F}from"./SelectSyndicate.9cf21e1b.js";import{l as $}from"./lodash.uniqueid.c6d1ce1a.js";import{s as w}from"./vue3-datepicker.8db1d195.js";import{r as t,o as p,A as _,y as e,j as v,C as h,F as U,c as I,q as R,i as q,b as g,V as N,W as z}from"./vendor.7b6f695f.js";import{_ as O}from"./SpreadSheet.5622495f.js";import{U as T}from"./uikit.bf3afdb6.js";import"./vuex.df26a1fd.js";import"./exceljs.4eeb6046.js";import"./numfmt.50579c65.js";import"./hyperformula.40eff455.js";import"./@babel/core.ed44cf94.js";import"./@vueform/multiselect.69d395cc.js";import"./vue3-date-time-picker.9548981a.js";import"./xlsx-js-style.0235676d.js";import"./clusterize.js.78919985.js";import"./file-saver.55724082.js";import"./vue-cookie-next.8cb9bd86.js";import"./luxon.1f9cfc03.js";import"./react-cookie.6c5c119f.js";const W={class:"uk-margin"},A=["for"],D={class:"uk-form-controls"},L={class:"uk-margin"},M=["for"],Q={class:"uk-form-controls"},G={props:{modelValue:Object},emits:["update:modelValue"],setup(c,{emit:x}){const V=c,r=t(),o=t(),s=a=>Object.assign({},a),b=s(V.modelValue),u=a=>(console.log("update fn",a),l=>{b[a]=l,x("update:modelValue",s(b))}),y=u("from"),i=u("to"),f=$(),n=a=>a+f;return(a,l)=>(p(),_(U,null,[e("div",W,[e("label",{class:"uk-form-label",for:n("range-from")},"From",8,A),e("div",D,[v(h(w),{class:"uk-input",placeholder:"Start at yyyy-mm-dd",typeable:"","onUpdate:modelValue":[h(y),l[0]||(l[0]=k=>o.value=k)],modelValue:o.value,id:n("range-from")},null,8,["onUpdate:modelValue","modelValue","id"])])]),e("div",L,[e("label",{class:"uk-form-label",for:n("range-to")},"To",8,M),e("div",Q,[v(h(w),{class:"uk-input",placeholder:"End at yyyy-mm-dd",typeable:"","onUpdate:modelValue":[h(i),l[1]||(l[1]=k=>r.value=k)],modelValue:r.value,id:n("range-to")},null,8,["onUpdate:modelValue","modelValue","id"])])])],64))}};const j=c=>(N("data-v-66697854"),c=c(),z(),c),H={class:"uk-card uk-card-default"},J={class:"uk-open"},K=j(()=>e("br",null,null,-1)),X=j(()=>e("a",{class:"uk-accordion-title uk-padding-small"},[e("h2",{class:"uk-width-expand uk-text-center"},"Pillar 3")],-1)),Y={class:"uk-accordion-content uk-card uk-card-default uk-card-body uk-width-xlarge uk-align-center"},Z={class:"uk-fieldset uk-form-horizontal"},ee={class:"uk-margin"},oe=["for"],te={class:"uk-form-controls"},ae={class:"uk-width-expand uk-text-center"},se={key:0,class:"uk-alert-danger","uk-alert":""},le=j(()=>e("a",{class:"uk-alert-close","uk-close":""},null,-1)),re={style:{"text-align":"center"}},ue={key:2,"uk-spinner":""},ne=j(()=>e("br",null,null,-1)),de={key:0,class:"uk-background-default uk-padding"},ce={setup(c){const x=$(),V=m=>m+x,r=t(),o=t(),s=t(),b=I(()=>!s.value&&r.value&&o.value&&o.value.to&&o.value.from),u=t(),y=t(),i=t(),f=t();let n;R(()=>{n=f.value});function a(){u.value=void 0,s.value=!0,P.post("/rpc/report/pillar3",{syndicate_id:r.value.syndicate_id,start_date:o.value.from,end_date:o.value.from}).then(m=>{s.value=!1;const d=new C(m.data);T.accordion(f.value).toggle(0,!0),y.value=d,i.value=d.spreadsheet("Pillar 3"),console.log("accordion",n)}).catch(m=>{u.value=m,s.value=!1})}const l=t("Pillar 3.xlsx"),k=()=>{E(l.value,i.value.workbook)};return I(()=>"uk-background-default uk-container"+y.value?"":"uk-height-viewport"),(m,d)=>(p(),_(U,null,[e("div",H,[e("ul",{"uk-accordion":"",ref_key:"accordionEl",ref:f},[e("li",J,[K,X,e("div",Y,[e("form",null,[e("fieldset",Z,[e("div",ee,[e("label",{class:"uk-form-label",for:V("syndicate")},"Syndicate",8,oe),e("div",te,[v(F,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=S=>r.value=S)},null,8,["modelValue"])])]),v(G,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=S=>o.value=S)},null,8,["modelValue"]),e("div",ae,[u.value?(p(),_("div",se,[le,e("p",re,q(u.value),1)])):g("",!0),h(b)?(p(),_("button",{key:1,onClick:a,class:"uk-button uk-button-primary",type:"button"},"Run Report")):g("",!0),s.value?(p(),_("div",ue)):g("",!0)])])])]),ne])],512)]),i.value?(p(),_("div",de,[e("button",{onClick:k,class:"uk-align-right uk-button"}," Save Spreadsheet"),v(O,{sheet:i.value,class:"uk-table uk-table-divider"},null,8,["sheet"])])):g("",!0)],64))}};var Ce=B(ce,[["__scopeId","data-v-66697854"]]);export{Ce as default};
